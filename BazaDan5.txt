24.05.25
-Транзакции и ACID

-Транзакция - это последовательность SQL-запросов,
которая работает как единая операция.

-ACID - правила работы с транзакциями
--A (atomicity) - Атомарность. Результаты всех SQL-запросов
в транзакции либо фиксируются полностью, либо
не применяются вовсе.
--С (consistency) - Согласованность. До и после фиксации транзакции
должны выполняться все ограничения целостности 
(внешние, первичные ключи, типы данных).
--I (isolation) - Изолированность. Результат параллельного выполнения 
нескольких транзакций должен быть таким же, как при
последовательном выполнении этих транзакций.
--D (durability) - Долговечность. Зафиксированная транзакция должна
сохраняться на диске или в другой энергонезависимой памяти.

-Проблемы изоляции
--Dirty Read - Грязное чтение, возникает когда SELECT-запрос видит
незафиксированные изменения других транзакций.
--Non-repeatable read - Неповторяющееся чтение возникает, когда
два последовательных выполнения одного и того же SELECT в одной
и той же транзакции дают разные значения для одной и той же строки
--Phantom read - Фантомное чтение возникает, когда два последовательных
выполнения одного и того же SELECT запроса в одной и той же транзакции
дают разный набор строк

-Уровни изоляции по стандарту SQL
--READ UNCOMMITED - Возможно всё
--READ COMMITED - Невозможен dirty read
--REPEATABLE READ - Невозможен dirty read и non-repeatable read
--SERIALIZABLE - Всё невозможно (приведение параллельных транзакций
к последовательным)

-Блокировки в СУБД
--Блокировки таблиц - INSERT + DELETE одной таблицы в разных транзакциях
--Блокировки строк - UPDATE разных строк в разных транзакциях в одной таблице
--Блокировки страниц памяти (B+ деревья) - один узел B+ дерева хранит
страницу из нескольких записей. Иногда может блокироваться вся страница целиком

-MVCC - Multi-Version Concurrency Control

